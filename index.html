<!DOCTYPE html> <!-- تعريف نوع المستند كـ HTML5 -->
<html lang="en"> <!-- بداية صفحة HTML وتحديد اللغة -->
<head>
  <meta charset="UTF-8" /> <!-- تحديد الترميز -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- لجعل الصفحة متجاوبة -->
  <title>URL Shortener Dashboard</title> <!-- عنوان الصفحة -->

  <!-- ✅ ربط ملف التنسيق الخارجي -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- 🧩 الصندوق الرئيسي للتطبيق -->
  <div class="app">
    <h1>🔗 URL Shortener Dashboard</h1>

    <!-- 🗂️ كارت إدخال الرابط -->
    <div class="card">
      <input type="text" id="longUrl" placeholder="Enter a long URL..." />
      <br>
      <button onclick="pasteUrl()">📋 Paste</button>
      <button onclick="shortenUrl()">Shorten URL</button>
      <p id="loading" class="loading" style="display:none;">Shortening your link...</p>
      <p id="shortUrl" class="fade-in" style="display:none;">
        Short URL: <a href="#" id="shortLink" target="_blank"></a>
        <button onclick="copyUrl()">📎 Copy</button>
      </p>
    </div>

    <!-- 📊 قسم الإحصائيات -->
    <div class="metrics">
      <h2>📊 Metrics Overview</h2>
      <p>URLs Shortened: <span id="shortened">0</span></p>
      <p>Redirects: <span id="redirects">0</span></p>
    </div>
  </div>

  <!-- 📢 إشعار التوست -->
  <div id="toast" class="toast"></div>

  <script>
    // ✅ دالة لإظهار رسالة Toast
    function showToast(message, color = "#4caf50") {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.style.background = color;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 2500);
    }

    // ✅ دالة لتقصير الرابط (محاكاة)
    function shortenUrl() {
      const input = document.getElementById("longUrl");
      const loading = document.getElementById("loading");
      const shortUrl = document.getElementById("shortUrl");
      const shortLink = document.getElementById("shortLink");

      if (!input.value.trim()) {
        showToast("⚠️ Please enter a valid URL", "#e53935");
        return;
      }

      loading.style.display = "block";
      shortUrl.style.display = "none";

      // محاكاة عملية تقصير الرابط
      setTimeout(() => {
        loading.style.display = "none";
        shortUrl.style.display = "block";
        const fakeShort = "https://short.ly/" + Math.random().toString(36).substring(2, 8);
        shortLink.href = fakeShort;
        shortLink.textContent = fakeShort;
        showToast("✅ URL shortened successfully!");

        // تحديث الإحصائيات
        const counter = document.getElementById("shortened");
        counter.textContent = parseInt(counter.textContent) + 1;
      }, 1500);
    }

    // ✅ دالة للصق من الحافظة
    async function pasteUrl() {
      try {
        const text = await navigator.clipboard.readText();
        document.getElementById("longUrl").value = text;
        showToast("📋 URL pasted from clipboard!");
      } catch (err) {
        showToast("❌ Clipboard access denied.", "#e53935");
      }
    }

    // ✅ دالة لنسخ الرابط المختصر
    function copyUrl() {
      const shortLink = document.getElementById("shortLink").textContent;
      navigator.clipboard.writeText(shortLink)
        .then(() => showToast("✅ Short link copied to clipboard!"))
        .catch(() => showToast("❌ Failed to copy link.", "#e53935"));
    }
  </script>
</body>
</html>
